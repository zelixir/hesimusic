
---
分别在app和ui文件夹下创建android端和web端程序, 并实现所需功能

---
package.json创建一个bundle命令, 将前端打包成zip放到app项目静态资源下, app启动时将该zip包映射为一个虚拟域名, 并打开前端主页

---
编写一个扫描音乐的功能实现方案, 放在design.scan.md中
方案需要描述哪些功能使用现有的库, 哪些功能需要自行开发, 以及使用的技术路线和原理
并设计一个大概的代码架构

---
读取`design.scan.md`, 生成一个开发计划(`impl.scan.md`), 包含前端和后端
开发计划以todolist的方式编写, 每一项都需要包含: 功能点, 技术路线, 代码文件及方法名
此阶段你无需编写实际的代码


---
读取`design.scan.md`和`impl.scan.md`, 完整实现扫描音乐的功能
你需要严格按照impl中的开发计划来逐个执行, 在每一项执行完成之后, 需要立刻更新impl中的对应项目的状态为"已完成"
只有在确保一项功能已经完整实现(须考虑各种实际使用场景, 不能包含todo或stub, 也不能是最小版本)后你才能开始下一项
功能所使用的技术路线必须完全按照开发计划来, 你不需要实现任何fallback功能
你必须完整实现扫描功能的所有子功能才能停止

---

实现歌曲库页面(首页)以及播放状态栏控件, 需要能够跳转到扫描页面
扫描页面需要使用文件夹选取控件(前端实现, 通过接口请求native端, 参考design中的`接口清单`)
文件夹选取控件需要实现完整功能(面包屑模式多层文件夹, 每层数据按需加载)

--- 

app端需要支持静态资源包更新的情况

---

MusicBridge在app环境下目前依然是返回mock数据, 需要调用真实接口
失败时直接报错, 确保app环境下是真实数据

---

修复app端的文件列表接口报没有权限的错误

---
修改扫描音乐的功能
删除原有选择文件夹的相关代码, 改为在app端向android系统请求文件夹权限(最好能多选)
在获得了文件夹权限后返回给前端展示

页面操作方式:
1. 界面上直接显示扫描和排除的目录列表(以用户友好形式而不是uri), 可以进行删除(使用Lucide图标库)
2. 提供添加文件夹按钮, 调用系统请求选取文件夹权限, 成功后将用户选择的文件夹添加到目录列表中
3. 点击开始扫描, 显示扫描进度, 如果扫描遇到权限或其他错误, 需要在前端展示

review扫描的实现代码:
你应该确保扫描过程中发生的每一处错误, 特别是异步任务中的错误, 都应该在界面中准确的展示
所有的try catch在发生错误时, 都需要有前端的显示
我不希望按钮后, 界面没有任何反应

---

修复bug: 扫描音乐页面, 点击添加文件夹, 会立刻添加music文件夹到文件夹列表(不应该发生)
然后弹出系统的选取文件夹界面, 选取了文件夹后, 并没有添加到扫描文件夹列表中(应该添加选取的那个)

---
移除前后端的requestFolderPermissions, 这是不需要的

---

优化扫描音乐页面:
1. 文件夹列表的文件夹名称应以用户友好的方式显示(native端实现)
2. 文件路径目前是url, 应转为对应路径(native端实现)
3. 过长的文件名需要换行
4. 文件夹列表目前只能添加, 需要增加移除功能
5. 添加了文件夹, 然后app重启之后就没了, 需要确认持久化功能正常运行

